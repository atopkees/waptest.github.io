/*!
 DMXzone Masonry
 Version: 1.0.0
 (c) 2017 DMXzone.com
 @build 2017-09-18 14:12:41
 */
dmx.Component("masonry",{extends:"repeat",constructor:function(t,e){this.reflow=dmx.debounce(this.reflow.bind(this)),this.breakpoints={sm:480,md:768,lg:992,xl:1200},dmx.BaseComponent.call(this,t,e)},attributes:{columns:{type:Number,default:4},"columns-sm":{type:Number,default:null},"columns-md":{type:Number,default:null},"columns-lg":{type:Number,default:null},"columns-xl":{type:Number,default:null},gutter:{type:Number,default:15},"gutter-sm":{type:Number,default:null},"gutter-md":{type:Number,default:null},"gutter-lg":{type:Number,default:null},"gutter-xl":{type:Number,default:null},"preserve-order":{type:Boolean,default:!1},animated:{type:Boolean,default:!1},"animation-duration":{type:Number,default:400}},methods:{reflow:function(){this.reflow()}},render:function(t){dmx.Component("repeat").prototype.render.call(this,t),this.$node.style.setProperty("position","relative"),window.addEventListener("resize",this.reflow.bind(this))},updated:function(){this.reflow()},reflow:function(){if(this.children.length){dmx.array(this.$node.querySelectorAll("img")).forEach(function(t){t.dmxMasonry||(t.addEventListener("load",this.reflow.bind(this)),t.src=t.src,t.dmxMasonry=!0)},this);var t=window.innerWidth,e=this.props.columns,r=this.props.gutter;["sm","md","lg","xl"].forEach(function(n){t>=this.breakpoints[n]&&(e=this.props["columns-"+n]||e,r=this.props["gutter-"+n]||r)},this);var n=dmx.array(this.$node.childNodes).filter(function(t){return 1===t.nodeType}),o=window.getComputedStyle(this.$node),i={left:parseFloat(o.paddingLeft),right:parseFloat(o.paddingRight)},s=Math.floor((this.$node.clientWidth-i.left-i.right-(e-1)*r)/e);n.forEach(function(t){t.style.setProperty("box-sizing","border-box"),t.style.setProperty("width",s+"px")},this);var l=Array.apply(null,Array(e)).map(function(){return 0}),a=n.map(function(t){return t.clientHeight});n.forEach(function(t,n){var o=this.props["preserve-order"]?n%e:l.indexOf(Math.min.apply(Math,l)),i=o*s+o*r,d=l[o];t.style.setProperty("transform","translate3d("+i+"px, "+d+"px, 0px)"),a[n]&&(t.dmxMasonryInit||(t.style.setProperty("position","absolute"),this.props.animated&&t.style.setProperty("transition","transform "+this.props["animation-duration"]+"ms"),window.requestAnimationFrame(function(){t.style.setProperty("visibility","visible")}),t.dmxMasonryInit=!0),l[o]+=a[n]+r)},this),this.$node.style.setProperty("height",Math.max.apply(Math,l)-r+"px")}}});
//# sourceMappingURL=../maps/dmxMasonry.js.map
